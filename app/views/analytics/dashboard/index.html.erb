<div class="bg-gradient px-4 py-5 min-vh-100" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
  <div class="container">
    <!-- HEADER WITH LOGIN BUTTON -->
    <div class="row mb-5">
      <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1 class="text-white mb-0 fw-bold fs-2">
            <i class="fas fa-chart-line me-3"></i>Thomas IT Analytics
          </h1>


<%= link_to "Login", login_path, 


              class: "btn btn-light btn-sm fw-bold px-4 shadow-sm" %>
        </div>
      </div>
    </div>

    <!-- METRICS -->
    <div class="row g-4 mb-5">
      <div class="col-md-6 col-lg-3">
        <div class="card border-0 shadow-lg text-white bg-primary h-100">
          <div class="card-body d-flex align-items-center">
            <i class="fas fa-exclamation-triangle fa-2x opacity-75 me-3"></i>
            <div>
              <h6 class="card-title mb-1">Open Tickets</h6>
              <h2 class="fw-bold mb-0"><%= @open_tickets %></h2>
            </div>
          </div>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-3">
        <div class="card border-0 shadow-lg text-white bg-success h-100">
          <div class="card-body d-flex align-items-center">
            <i class="fas fa-ticket-alt fa-2x opacity-75 me-3"></i>
            <div>
              <h6 class="card-title mb-1">Total Tickets</h6>
              <h2 class="fw-bold mb-0"><%= @recent_tickets.count %></h2>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-4">
      <!-- TICKETS TABLE -->
      <div class="col-lg-8">
        <div class="card shadow-lg border-0">
          <div class="card-header bg-white">
            <h5><i class="fas fa-list text-primary me-2"></i>Recent Tickets</h5>
          </div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="table table-hover mb-0">
                <thead class="table-light">
                  <tr>
                    <th>ID</th><th>Title</th><th>Status</th><th>Created</th>
                  </tr>
                </thead>
                <tbody>
                  <% @recent_tickets.each do |t| %>
                  <tr>
                    <td class="fw-bold text-primary">#<%= t.id %></td>
                    <td><%= t.title.truncate(40) %></td>
                    <td>
                      <% badge = case t.status
                      when 'open' then 'bg-warning text-dark'
                      when 'in_progress' then 'bg-info'
                      else 'bg-success' end %>
                      <span class="badge <%= badge %> px-3 py-2"><%= t.status.titleize %></span>
                    </td>
                    <td><%= time_ago_in_words(t.created_at) %> ago</td>
                  </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- STATS & KEYWORDS -->
      <div class="col-lg-4">
        <div class="card shadow-lg h-100 border-0">
          <div class="card-header bg-white">
            <h6><i class="fas fa-chart-bar text-success me-2"></i>Ticket Stats</h6>
          </div>
          <div class="card-body pt-4">
            <% @ticket_stats.each do |status, count| %>
              <div class="d-flex justify-content-between align-items-center mb-3 p-2 bg-light rounded">
                <span class="fw-semibold"><%= status.titleize %></span>
                <span class="badge bg-primary px-3 py-2 fs-6"><%= count %></span>
              </div>
            <% end %>
            
            <hr class="my-4">
            
            <h6 class="mb-3"><i class="fas fa-hashtag text-info me-2"></i>Top Keywords</h6>
            <% @top_keywords.first(6).each do |word, count| %>
              <div class="d-flex justify-content-between align-items-center py-2">
                <span class="fw-medium"><%= word.capitalize %></span>
                <span class="badge bg-outline-primary px-2 py-1"><%= count %></span>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
